<br/>
<a href="" (click)="goToContentPage($event)" class="btn red darken-2 mdi-navigation-arrow-back" title="Back">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back
</a>

<div class="row">
    <div class="col m12">
        <div class="card">
            <div class="card-panel" [ngClass]="operation.getMethodClass()">
                <strong>{{operation.name}}</strong>&nbsp;- <span><a href="">{{operation.path}}</a></span>
            </div>
            <div class="card-content">
                <p>{{operation.summary}}</p>
                <p>{{operation.description}}</p>
            </div>
        </div>
    </div>
</div>
<form name="apiDetailForm">
    <div [hidden]="!operation.parameters || operation.parameters.length === 0">
        <h4>Request url</h4>
        <div>
            <p><a href="">{{apiDoc.baseUrl}}{{operation.getRequestUrl()}}</a></p>
        </div>
        <div class="input-field col s6">
            <h4>Response content type</h4>
            <select class="browser-default form-control" [(ngModel)]="operation.produce" materialize-select>
                <option *ngFor="#produce of operation.produces" value="{{produce}}">{{produce}}</option>
            </select>
        </div>
        <div class="col s6"></div>
        <div class="col s12">
            <a href="" (click)="bodyModal.tryApi($event)" class="text-black btn right waves-effect waves-light"
               [ngClass]="operation.getMethodClass()">Send <i class="mdi-content-send right"></i></a>
            <h4>Parameters</h4>
            <table class="bordered responsive-table">
                <thead>
                <th>Parameter</th>
                <th>Description</th>
                <th>Parameter type</th>
                <th>Http parameter type</th>
                <th>Data type</th>
                </thead>
                <tbody>
                <tr *ngFor="#parameter of operation.parameters">
                    <td *ngIf="!parameter.isBodyParam()">
                        <div class="input-field">
                            <input [attr.id]="parameter.name" name="parameter{{$index}}" type="text" [(ngModel)]="parameter.value" ng-required="parameter.required" />
                            <label [attr.for]="parameter.name">{{parameter.name}}</label>
                        </div>
                    </td>
                    <td *ngIf="parameter.isBodyParam()">
                        <textarea class="materialize-textarea" placeholder="{{parameter.name}}" [(ngModel)]="operation.dataJson" required rows="10"></textarea><br/>
                        <button type="button" (click)="generateJSON($event,parameter)" class="text-black btn waves-effect waves-light" [ngClass]="operation.getMethodClass()" >Generate JSON</button>
                    </td>
                    <td>{{parameter.description}}</td>
                    <td>{{parameter.getParameterType()}}</td>
                    <td>{{parameter.in}}</td>
                    <td>
                        <a href="" *ngIf="apiDoc.isOperationDtoType(operation)"
                           (click)="typeModal.selectType($event,apiDoc.getDtoType(operation))">{{apiDoc.getDtoType(operation)}}
                        </a>
                        <span *ngIf="!apiDoc.isOperationDtoType(operation) && apiDoc.isTypeArray(operation)">
                            [<a href="" (click)="typeModal.selectType($event,apiDoc.getDtoType(operation))">{{apiDoc.getDtoType(operation)}}</a>]
                        </span>
                    </td>
                </tr>
                <tr *ngIf="operation.isPatchMethod()">
                    <td>
                        <textarea class="materialize-textarea" placeholder="dto" ([ngModel])="operation.patchJson" required rows="10"></textarea><br/>
                        <button type="button" (click)="generateJSON($event)" class="text-black btn waves-effect waves-light"
                                [ngClass]="operation.getMethodClass()" >Generate JSON</button>
                    </td>
                    <td>Patch dto</td>
                    <td>body</td>
                    <td>{{parameter}}</td>
                    <td>
                        <a href="" *ngIf="apiDoc.isOperationDtoType(operation)"
                           (click)="typeModal.selectType($event,apiDoc.getDtoType(operation))">{{apiDoc.getDtoType(operation)}}</a>
                        <span *ngIf="!apiDoc.isOperationDtoType(operation) && apiDoc.isTypeArray(operation)">
                            [<a href="" (click)="typeModal.selectType($event,apiDoc.getDtoType(operation))">{{apiDoc.getDtoType(operation)}}</a>]
                        </span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <type-modal #typeModal></type-modal>
    <body-modal [operation]="operation" #bodyModal></body-modal>
</form>